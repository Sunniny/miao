import{aL as J,aF as ee,g as z,B as te,f as _,b as i,d as A,l as N,aM as ne,n as C,I as w,$ as oe,T as E,U as O,a4 as $,k as u,aN as L,G as ae,E as Y,F as le,v as B,aO as se,t as F,s as K,aP as M,N as ce,i as X,a9 as H,aa as U,P as re,X as ie,Y as ue,a8 as de,aQ as ve,aR as fe,an as ye,ab as me,H as he,ar as Ie}from"./index-11d64c67.js";function Se(e,{args:t=[],done:n,canceled:s}){if(e){const a=e.apply(null,t);J(a)?a.then(o=>{o?n():s&&s()}).catch(ee):a?n():s&&s()}else n()}function Oe(e){const t=te();t&&z(t.proxy,e)}let Ce=2e3;const xe=()=>++Ce,[Pe,b]=_("loading"),be=Array(12).fill(null).map((e,t)=>i("i",{class:b("line",String(t+1))},null)),ge=i("svg",{class:b("circular"),viewBox:"25 25 50 50"},[i("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),ke={size:C,type:w("circular"),color:String,vertical:Boolean,textSize:C,textColor:String};var we=A({name:Pe,props:ke,setup(e,{slots:t}){const n=N(()=>z({color:e.color},ne(e.size))),s=()=>{const o=e.type==="spinner"?be:ge;return i("span",{class:b("spinner",e.type),style:n.value},[t.icon?t.icon():o])},a=()=>{var o;if(t.default)return i("span",{class:b("text"),style:{fontSize:oe(e.textSize),color:(o=e.textColor)!=null?o:e.color}},[t.default()])};return()=>{const{type:o,vertical:l}=e;return i("div",{class:b([o,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[s(),a()])}}});const Ye=E(we),j={show:Boolean,zIndex:C,overlay:O,duration:C,teleport:[String,Object],lockScroll:O,lazyRender:O,beforeClose:Function,overlayStyle:Object,overlayClass:$,transitionAppear:Boolean,closeOnClickOverlay:O},Fe=Object.keys(j);function ze(e,t){return e>t?"horizontal":t>e?"vertical":""}function Te(){const e=u(0),t=u(0),n=u(0),s=u(0),a=u(0),o=u(0),l=u(""),r=u(!0),x=()=>l.value==="vertical",S=()=>l.value==="horizontal",d=()=>{n.value=0,s.value=0,a.value=0,o.value=0,l.value="",r.value=!0};return{move:v=>{const f=v.touches[0];n.value=(f.clientX<0?0:f.clientX)-e.value,s.value=f.clientY-t.value,a.value=Math.abs(n.value),o.value=Math.abs(s.value);const I=10;(!l.value||a.value<I&&o.value<I)&&(l.value=ze(a.value,o.value)),r.value&&(a.value>L||o.value>L)&&(r.value=!1)},start:v=>{d(),e.value=v.touches[0].clientX,t.value=v.touches[0].clientY},reset:d,startX:e,startY:t,deltaX:n,deltaY:s,offsetX:a,offsetY:o,direction:l,isVertical:x,isHorizontal:S,isTap:r}}let P=0;const p="van-overflow-hidden";function _e(e,t){const n=Te(),s="01",a="10",o=d=>{n.move(d);const h=n.deltaY.value>0?a:s,g=se(d.target,e.value),{scrollHeight:v,offsetHeight:f,scrollTop:I}=g;let y="11";I===0?y=f>=v?"00":"01":I+f>=v&&(y="10"),y!=="11"&&n.isVertical()&&!(parseInt(y,2)&parseInt(h,2))&&F(d,!0)},l=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",o,{passive:!1}),P||document.body.classList.add(p),P++},r=()=>{P&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",o),P--,P||document.body.classList.remove(p))},x=()=>t()&&l(),S=()=>t()&&r();ae(x),Y(S),le(S),B(t,d=>{d?l():r()})}function G(e){const t=u(!1);return B(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[Ae,Ee]=_("overlay"),Be={show:Boolean,zIndex:C,duration:C,className:$,lockScroll:O,lazyRender:O,customStyle:Object};var De=A({name:Ae,props:Be,setup(e,{slots:t}){const n=u(),s=G(()=>e.show||!e.lazyRender),a=l=>{e.lockScroll&&F(l,!0)},o=s(()=>{var l;const r=z(ce(e.zIndex),e.customStyle);return X(e.duration)&&(r.animationDuration=`${e.duration}s`),H(i("div",{ref:n,style:r,class:[Ee(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[U,e.show]])});return K("touchmove",a,{target:n}),()=>i(M,{name:"van-fade",appear:!0},{default:o})}});const Le=E(De),pe=z({},j,{round:Boolean,position:w("center"),closeIcon:w("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:w("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Re,R]=_("popup");var Ne=A({name:Re,inheritAttrs:!1,props:pe,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:s}){let a,o;const l=u(),r=u(),x=G(()=>e.show||!e.lazyRender),S=N(()=>{const c={zIndex:l.value};if(X(e.duration)){const m=e.position==="center"?"animationDuration":"transitionDuration";c[m]=`${e.duration}s`}return c}),d=()=>{a||(a=!0,l.value=e.zIndex!==void 0?+e.zIndex:xe(),t("open"))},h=()=>{a&&Se(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},g=c=>{t("clickOverlay",c),e.closeOnClickOverlay&&h()},v=()=>{if(e.overlay)return i(Le,{show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:g},{default:s["overlay-content"]})},f=c=>{t("clickCloseIcon",c),h()},I=()=>{if(e.closeable)return i(Ie,{role:"button",tabindex:0,name:e.closeIcon,class:[R("close-icon",e.closeIconPosition),he],classPrefix:e.iconPrefix,onClick:f},null)};let y;const V=()=>{y&&clearTimeout(y),y=setTimeout(()=>{t("opened")})},Z=()=>t("closed"),Q=c=>t("keydown",c),W=x(()=>{var c;const{round:m,position:k,safeAreaInsetTop:T,safeAreaInsetBottom:q}=e;return H(i("div",me({ref:r,style:S.value,role:"dialog",tabindex:0,class:[R({round:m,[k]:k}),{"van-safe-area-top":T,"van-safe-area-bottom":q}],onKeydown:Q},n),[(c=s.default)==null?void 0:c.call(s),I()]),[[U,e.show]])}),D=()=>{const{position:c,transition:m,transitionAppear:k}=e,T=c==="center"?"van-fade":`van-popup-slide-${c}`;return i(M,{name:m||T,appear:k,onAfterEnter:V,onAfterLeave:Z},{default:W})};return B(()=>e.show,c=>{c&&!a&&(d(),n.tabindex===0&&re(()=>{var m;(m=r.value)==null||m.focus()})),!c&&a&&(a=!1,t("close"))}),Oe({popupRef:r}),_e(r,()=>e.show&&e.lockScroll),K("popstate",()=>{e.closeOnPopstate&&(h(),o=!1)}),ie(()=>{e.show&&d()}),ue(()=>{o&&(t("update:show",!0),o=!1)}),Y(()=>{e.show&&e.teleport&&(h(),o=!0)}),de(ve,()=>e.show),()=>e.teleport?i(fe,{to:e.teleport},{default:()=>[v(),D()]}):i(ye,null,[v(),D()])}});const Ke=E(Ne);export{Ye as L,Ke as P,Oe as a,Fe as b,Se as c,j as p,Te as u};
